<% content_for :title, "Robot #{@robot.name} | Rails RCC Remote" %>

<section class="panel">
  <div class="panel-header">
    <h1 class="panel-title">Robot: <%= @robot.name %></h1>
    <%= link_to "Back", robots_path, class: "button" %>
  </div>

  <div class="path-grid">
    <div>
      <div class="path-label">PATH</div>
      <code><%= @robot.path %></code>
    </div>
    <div>
      <div class="path-label">FILES</div>
      <code><%= @robot.all_files.length %></code>
    </div>
  </div>
</section>

<section class="panel">
  <h2 class="panel-title">Upload files</h2>
  <%= form_with url: upload_robot_path(@robot.name), method: :post, multipart: true, class: "form-row" do %>
    <%= file_field_tag "files[]", multiple: true, class: "input" %>
    <%= submit_tag "Upload", class: "button button-primary" %>
  <% end %>
</section>

<section class="panel">
  <div class="panel-header">
    <h2 class="panel-title">Core file content</h2>
    <%= link_to "Edit Core Files", edit_files_robot_path(@robot.name), class: "button button-primary" %>
  </div>

  <h3 class="subheading">robot.yaml</h3>
  <pre class="terminal"><%= @robot.files.fetch("robot.yaml", "robot.yaml not found") %></pre>

  <h3 class="subheading">conda.yaml</h3>
  <pre class="terminal"><%= @robot.files.fetch("conda.yaml", "conda.yaml not found") %></pre>
</section>

<section class="panel">
  <h2 class="panel-title">All files</h2>
  <% if @robot.all_files.empty? %>
    <p class="empty">No files found.</p>
  <% else %>
    <ul class="file-list">
      <% @robot.all_files.each do |file_path| %>
        <li><code><%= file_path %></code></li>
      <% end %>
    </ul>
  <% end %>
</section>
